---
import { siteConfig } from "@/site-config";
import type { Page } from "src/lib/notion-interfaces";
import { getDatabaseByName } from "src/lib/notion/client";

let pagesDatabase = (await getDatabaseByName("Pages"))!;
let pages: Page[];
pages = pagesDatabase.Pages;

const year = new Date().getFullYear();
---

<footer
  class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-6 text-center align-top sm:flex-row sm:justify-between sm:text-xs"
>
  <div class="ml-1 me-0 sm:me-4 font-body">
    &copy; {siteConfig.author}
    {year}
  </div>
  <nav
    aria-label="More on this site"
    class="flex flex-col sm:flex-row font-body"
  >
    {
      pages.map((page) => (
        <a
          class="sm:px-3 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline"
          href={page.Name === "Homepage" ? "/" : "/" + page.Slug}
          title={page.FullName}
        >
          {page.Name}
        </a>
      ))
    }
    <a
      class="sm:px-3 py-2 sm:py-0 sm:hover:text-textColor sm:hover:underline"
      data-astro-prefetch
      href="/daniel-locatelli-cv.pdf"
      title="Daniel Locatelli's CV"
    >
      CV
    </a>
  </nav>
</footer>
