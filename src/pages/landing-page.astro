---
import { siteConfig } from "@/site-config"; // Assuming this file exists and is configured
import { Image } from "astro:assets";
import logo from "../assets/logo-dl.svg"; // Your logo
import profilePhoto from "../assets/daniel-locatelli-v1.png"; // Your profile photo
import WhatsApp from "../assets/digital-glyph-white.svg"; // WhatsApp icon (white version for dark BGs)
import Base from "@/layouts/Base.astro";
import Container from "@/components/Container.astro";
import { Icon } from "astro-icon/components";

// Static data derived from the PDF for the landing page content
const pageTitleFromPdf =
  "Daniel Locatelli | Architect-Programmer | AECO Software Solutions";
const pageDescriptionFromPdf =
  "Daniel Locatelli offers custom software development, computational design, and web applications for the Architecture, Engineering, Construction, and Operations (AECO) industry.";

// Determine title and description, prioritizing siteConfig if available
const titleToUse = siteConfig.title || pageTitleFromPdf;
const descriptionToUse = siteConfig.description || pageDescriptionFromPdf; // Assuming siteConfig might have a general description
const coverUrl = "/images/hero-background-aeco.jpg"; // Placeholder for a relevant hero background image
const coverAltToUse = "Innovative AECO software solutions by Daniel Locatelli";

const services = [
  {
    title: "Plugin Development",
    description:
      "Bespoke tools (Rhino/Grasshopper, Revit, AutoCAD) to automate tasks, integrate specialized analyses, or extend a software capability.",
    icon: "ph:puzzle-piece",
  },
  {
    title: "Web Applications",
    description:
      "Web-based solutions like project management dashboards, data visualization platforms, collaborative tools, and financial simulators.",
    icon: "ph:cursor-click",
  },
  {
    title: "Computational Design",
    description:
      "Applying advanced computational design strategies to streamline and enhance AECO processes, improving efficiency in design, analysis, and documentation.",
    icon: "ph:buildings",
  },
  {
    title: "Data Visualization",
    description:
      "Creating dashboards to better understand, interpret, and act upon complex project data.",
    icon: "ph:chart-line-up",
  },
  {
    title: "Digital Fabrication",
    description:
      "Developing software for fabrication machinery, optimizing designs for digital manufacturing, and providing expert consultation.",
    icon: "ph:resize",
  },
];

const projects = [
  {
    title: "BuildSystems Funding Calculator",
    context: "BuildSystems GmbH",
    challenge:
      "Simplify complex KfW funding simulations for sustainable housing for real estate developers and homeowners.",
    solution:
      "Scalable web application with user-friendly forms and interactive charts for simulating funding scenarios.",
    technologies:
      "TypeScript, Angular, ng2-charts, Supabase, PostgreSQL, HTML, CSS.",
    impact:
      "Empowers users to make informed financial decisions for sustainable building, facilitating energy-efficient construction practices.",
    imageUrl: "/assets/kfw-foerdertool-von-buildsystems_large.webp", // to be changed
    link: "/projects/kfw-funding-calculator-by-buildsystems",
  },
  {
    title: "BuildSystems Plugin for Grasshopper/Rhino3D",
    context: "BuildSystems GmbH",
    challenge:
      "Provide architects/planners with integrated tools in Rhino/Grasshopper for early-stage feasibility analysis and Life Cycle Assessment (LCA).",
    solution:
      "Grasshopper plugin with 'Urban Level Tools' (city legislation, fire protection) and 'LCA Tools' (Ã–kobaudat integration for GWP, PENRT).",
    technologies: "C#, RhinoCommon, Grasshopper API.",
    impact:
      "Enables designers to perform critical feasibility and sustainability analyses directly within their design environment, promoting informed decision-making.",
    imageUrl: "/assets/buildsystems-plugin.png", // Replace with actual path
    link: "https://github.com/build-systems/build-systems-gh",
  },
  {
    title: "Research: Automatic Column Placement",
    context: "Academic research, University of Stuttgart.",
    challenge:
      "Develop an efficient method for placing structural columns in complex multi-story buildings during early design, integrating spatial and structural criteria.",
    solution:
      "Feedback-based computational method integrating circle packing, spring system, and structural engineering simulations in a single script.",
    technologies:
      "Algorithmic scripting (Python/C#), computational geometry, structural analysis.",
    impact:
      "Presents a novel approach to automating and optimizing structural design, potentially leading to efficient material use and improved building performance.",
    imageUrl: "/images/column-placement.jpg", // Replace with actual path
    link: null,
  },
];

const technicalSkills = {
  languages: "TypeScript, C#, Python, JavaScript",
  frameworks: "Angular, Astro, React (familiar)",
  webTech: "HTML, CSS, Tailwind CSS, Supabase, PostgreSQL",
  aecoSoftware: "Rhino/Grasshopper (API), Revit (familiar), BIM",
  tools: "Git/GitHub, Figma (familiar)",
  computationalStrategies:
    "Agent-Based Modeling, Cellular Automata, Dynamic Relaxation, L-Systems, Voronoi diagrams, and many more.",
};

const locale = "en"; // Use siteConfig locale or default to 'en'
const whatsAppUrl = siteConfig.whatsapp; // Get WhatsApp URL from siteConfig
const emailAddress = siteConfig.email;
const linkedInUrl = siteConfig.linkedin;
const githubUrl = siteConfig.github;
const instagramUrl = siteConfig.instagram;

// Placeholder for coverList if Notion logic is not active for this page
const coverList: string[] = [];
---

<Base
  meta={{
    title: "Daniel Locatelli",
    description:
      "This is my full CV, including work, education, lectures, publications, certificates, and more.",
    coverAlt: "Daniel Locatelli's profile photo.",
    coverImage: "@/assets/daniel-locatelli.png",
    locale: "en",
    slug: "cv",
  }}
>
  <Container
    class="font-body relative mt-16 flex flex-col gap-4 text-base [&_h2]:mb-4 [&_h2]:text-3xl [&_h3]:text-xl [&_h4]:text-lg [&_h4]:text-zinc-400 [&_section]:mt-16"
  >
    <!-- <header class="font-body sticky top-0 z-50 bg-white shadow-md">
      <nav
        class="container mx-auto flex items-center justify-between px-6 py-4"
      >
        <a href="/" class="flex items-center" title="Homepage">
          <Image
            src={logo}
            alt="Daniel Locatelli Logo"
            class="mr-3 h-10 w-auto"
          />
          <span class="font-title text-2xl font-semibold text-gray-800"
            >Daniel Locatelli</span
          >
        </a>
        <div class="space-x-2 md:space-x-4">
          <a
            href="#services"
            class="rounded-md px-3 py-2 text-sm font-medium text-gray-600 hover:text-green-600"
            >Services</a
          >
          <a
            href="#about"
            class="rounded-md px-3 py-2 text-sm font-medium text-gray-600 hover:text-green-600"
            >About</a
          >
          <a
            href="#projects"
            class="rounded-md px-3 py-2 text-sm font-medium text-gray-600 hover:text-green-600"
            >Projects</a
          >
          <a
            href={whatsAppUrl}
            target="_blank"
            rel="noopener noreferrer"
            title="Contact via WhatsApp"
            class="inline-flex items-center gap-2 rounded-md bg-gradient-to-r from-green-400 to-green-500 px-4 py-2 text-sm font-medium text-white transition hover:from-green-500 hover:to-green-600 hover:shadow-[0px_4px_10px_rgba(0,128,0,0.3)]"
          >
            Let's talk
            <Image src={WhatsApp} alt="" class="h-4 w-4" />
          </a>
        </div>
      </nav>
    </header> -->

    <section id="hero">
      <div class="container mx-auto">
        <Image
          src={profilePhoto}
          alt="Daniel Locatelli"
          class="mx-auto mb-8 h-36 w-36 rounded-full border-4 border-gray-200 shadow-xl md:h-44 md:w-44"
        />
        <h1 class="font-title mb-6 text-2xl font-bold sm:text-3xl md:text-4xl">
          <p>Hi,</p>
          <p>I'm Daniel,</p>
          <p>software engineer.</p>
        </h1>
        <p class="font-body mx-auto mb-10 max-w-3xl text-balance">
          As a research associate at the Munich University of Applied Sciences,
          I specialize in developing custom plugins, web applications, and
          computational design solutions for architecture, engineering, and
          construction (AEC).
        </p>
        <a
          href={whatsAppUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-4 rounded-lg bg-gradient-to-r from-green-600 to-green-700 px-8 py-3 text-lg text-white transition hover:from-green-700 hover:to-green-800 hover:shadow-[0px_5px_15px_rgba(0,128,0,0.4)] focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:outline-none"
        >
          Request a quote
          <Image src={WhatsApp} alt="WhatsApp Icon" class="size-5" />
        </a>
      </div>
    </section>

    <section id="services" class="">
      <div class="container mx-auto">
        <h2 class="text-center">My Service Offerings</h2>
        <div class="flex flex-col gap-2">
          {
            services.map((service) => (
              <div class="flex flex-col gap-2 rounded-xl bg-zinc-800 p-8 shadow-lg transition-shadow duration-300 hover:shadow-xl">
                <div class="flex items-center gap-3">
                  <Icon
                    name={service.icon}
                    class="size-7 shrink-0 print:hidden"
                  />
                  <h3 class="font-title flex items-center text-gray-100">
                    {service.title}
                  </h3>
                </div>
                <p class="font-body leading-relaxed text-gray-200">
                  {service.description}
                </p>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <section id="about" class="">
      <div class="container mx-auto">
        <div class="text-center">
          <h2 class="">The Architect-Programmer Advantage</h2>
        </div>
        <div
          class="font-body mx-auto max-w-4xl space-y-6 rounded-xl bg-zinc-800 p-10 text-lg leading-relaxed shadow-xl"
        >
          <p>
            My unique strength lies at the intersection of architecture and
            software development. With a Master of Science from the University
            of Stuttgart and recognition like the IntCDC Master's Thesis Grant
            2021 for "Building Across Scales", I possess a deep, nuanced
            understanding of AECO domain challenges.
          </p>
          <p>
            This architectural insight is coupled with robust full-stack
            development expertise. I don't just write code; I design and build
            software solutions that are tailored to the needs of architects,
            engineers, and construction professionals because I understand your
            world. The result? More intuitive, effective, and innovative tools
            that seamlessly integrate into your workflows and directly address
            your project goals.
          </p>
        </div>
      </div>
    </section>

    <section id="projects" class="py-16 text-gray-100 md:py-24">
      <div class="container mx-auto px-6">
        <h2 class="font-title mb-16 text-center text-3xl md:text-4xl">
          Portfolio Highlights
        </h2>
        <div class="grid gap-8">
          {
            projects.map((project) => (
              <div class="flex flex-col overflow-hidden rounded-xl bg-zinc-800 shadow-lg transition-shadow duration-300 hover:shadow-xl">
                <Image
                  src={project.imageUrl}
                  alt={`Screenshot of ${project.title}`}
                  width={600}
                  height={400}
                  format="webp"
                  class="h-56 w-full object-cover"
                />
                <div class="font-body flex flex-grow flex-col p-6">
                  <h3 class="font-title mb-1 text-xl font-semibold text-gray-100">
                    {project.title}
                  </h3>
                  <a
                    href="https://buildsystem.de"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="mb-2 text-xs font-medium tracking-wider text-green-500 uppercase"
                  >
                    {project.context}
                  </a>
                  <p class="mb-3 text-sm text-gray-200">
                    <strong>Tech:</strong> {project.technologies}
                  </p>
                  <p class="mb-2 text-sm text-gray-300">
                    <strong class="text-gray-100">Challenge:</strong>{" "}
                    {project.challenge}
                  </p>
                  <p class="mb-4 text-sm leading-relaxed text-gray-200">
                    <strong class="text-gray-100">Impact:</strong>{" "}
                    {project.impact}
                  </p>
                  <div class="mt-auto border-t border-gray-200 pt-3">
                    {project.link && (
                      <a
                        href={project.link}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="group inline-flex items-center text-sm font-medium text-green-600 transition duration-300 hover:text-green-500"
                      >
                        <span class="pr-1">View the full article</span>
                        <Icon
                          name="mdi:arrow-right"
                          class="size-4 shrink-0 print:hidden"
                        />
                      </a>
                    )}
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <section id="expertise" class="py-16 text-white md:py-24">
      <div class="container mx-auto px-6">
        <h2
          class="font-title mb-16 text-center text-3xl font-bold text-gray-100 md:text-4xl"
        >
          Technical Expertise & Computational Strategies
        </h2>
        <div
          class="font-body mx-auto max-w-5xl rounded-xl border border-gray-200 bg-zinc-800 p-10 shadow-xl"
        >
          <p class="mb-10 text-center text-lg leading-relaxed text-gray-100">
            Leveraging a comprehensive tech stack and advanced computational
            strategies to tackle demanding AECO software challenges. My
            capabilities span full-stack development, ensuring robust and
            scalable solutions.
          </p>
          <div
            class="grid grid-cols-1 gap-x-10 gap-y-8 text-gray-200 md:grid-cols-2"
          >
            <div>
              <h4
                class="font-title mb-4 border-b-2 border-green-400 pb-2 text-2xl font-semibold text-gray-100"
              >
                Key Technologies
              </h4>
              <ul class="mt-4 space-y-2 text-sm">
                <li>
                  <strong class="font-medium text-gray-100">Languages:</strong>
                  {technicalSkills.languages}
                </li>
                <li>
                  <strong class="font-medium text-gray-100"
                    >Frameworks/Libs:</strong
                  >
                  {technicalSkills.frameworks}
                </li>
                <li>
                  <strong class="font-medium text-gray-100"
                    >Web Tech & Databases:</strong
                  >
                  {technicalSkills.webTech}
                </li>
                <li>
                  <strong class="font-medium text-gray-100"
                    >AECO Software/APIs:</strong
                  >
                  {technicalSkills.aecoSoftware}
                </li>
                <li>
                  <strong class="font-medium text-gray-100"
                    >Dev Tools & Design:</strong
                  >
                  {technicalSkills.tools}
                </li>
              </ul>
            </div>
            <div>
              <h4
                class="font-title mb-4 border-b-2 border-green-400 pb-2 text-2xl font-semibold text-gray-100"
              >
                Computational Strategies
              </h4>
              <p class="mt-4 mb-3 text-sm">
                Proficient in a wide array of computational design strategies
                including:
              </p>
              <p
                class="rounded-md border border-green-200 bg-zinc-800 p-3 text-xs text-balance text-green-500"
              >
                {technicalSkills.computationalStrategies}
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="testimonials" class="bg-zinc-800 py-16 md:py-24">
      <div class="container mx-auto px-6">
        <h2
          class="font-title mb-12 text-center text-3xl font-bold text-gray-200 md:text-4xl"
        >
          What Clients & Collaborators Say
        </h2>
        <div class="font-body mx-auto max-w-3xl text-center">
          <p class="text-lg text-gray-400 italic">
            "Building trust through proven success. Testimonials coming soon."
          </p>
        </div>
      </div>
    </section>

    <section id="contact" class="mb-12 bg-zinc-800 py-20 text-white md:py-28">
      <div class="container mx-auto px-6 text-center">
        <h2 class="font-title mb-6 text-3xl font-bold md:text-4xl lg:text-5xl">
          Ready to Elevate Your AECO Projects?
        </h2>
        <p
          class="font-body mx-auto mb-10 max-w-2xl text-lg text-gray-300 md:text-xl"
        >
          Let's discuss how my expertise as an architect-programmer can
          transform your challenges into innovative software solutions.
        </p>
        <div
          class="mb-8 flex flex-col items-center justify-center space-y-6 sm:flex-row sm:space-y-0 sm:space-x-6"
        >
          <a
            href={whatsAppUrl}
            target="_blank"
            rel="noopener noreferrer"
            title="Contact Daniel Locatelli on WhatsApp"
            class="inline-flex items-center gap-3 rounded-lg bg-gradient-to-r from-green-500 to-green-600 px-8 py-3 text-lg text-white transition hover:from-green-600 hover:to-green-700 hover:shadow-[0px_5px_20px_rgba(72,187,120,0.5)] focus:ring-2 focus:ring-green-400 focus:ring-offset-2 focus:outline-none"
          >
            <Image src={WhatsApp} alt="WhatsApp Icon" class="h-5 w-5" />
            Let's Talk
          </a>
          <a
            href={`mailto:${emailAddress}`}
            title="Email Daniel Locatelli"
            class="inline-flex items-center gap-3 rounded-lg border-2 border-green-400 px-8 py-3 text-lg text-green-400 transition hover:bg-green-400 hover:text-gray-900 focus:ring-2 focus:ring-green-300 focus:ring-offset-2 focus:ring-offset-gray-800 focus:outline-none"
          >
            <Icon
              name="mdi:email-outline"
              class="size-7 shrink-0 print:hidden"
            />
            Send an Email
          </a>
        </div>
        <div class="mt-12">
          <p class="font-body mb-3 text-gray-400">Connect with me on:</p>
          <div class="flex justify-center space-x-6">
            <a
              href={linkedInUrl}
              target="_blank"
              rel="noopener noreferrer"
              title="Daniel Locatelli on LinkedIn"
              class="text-gray-300 transition duration-300 hover:text-green-400"
            >
              <Icon name="mdi:linkedin" class="size-7 shrink-0 print:hidden" />
            </a>
            <a
              href={githubUrl}
              target="_blank"
              rel="noopener noreferrer"
              title="Daniel Locatelli on GitHub"
              class="text-gray-300 transition duration-300 hover:text-green-400"
            >
              <Icon name="mdi:github" class="size-7 shrink-0 print:hidden" />
            </a>
            <a
              href={instagramUrl}
              target="_blank"
              rel="noopener noreferrer"
              title="Daniel Locatelli on GitHub"
              class="text-gray-300 transition duration-300 hover:text-green-400"
            >
              <Icon name="mdi:instagram" class="size-7 shrink-0 print:hidden" />
            </a>
          </div>
        </div>
      </div>
    </section>
  </Container>
</Base>
